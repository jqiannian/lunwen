# å¼€å‘è®¡åˆ’ï¼ˆITER-2025-01ï¼‰

> è¿­ä»£ç›®æ ‡ï¼šåœ¨ Python æŠ€æœ¯æ ˆä¸‹äº¤ä»˜â€œçº¢ç¯åœâ€æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹ MVPï¼Œèšç„¦äº¤é€šè§„åˆ™ã€è¯­ä¹‰å…³ç³»æ¨ç†ä¸æ³¨æ„åŠ›å¢å¼ºã€‚

## å…ƒæ•°æ®
| å­—æ®µ | å†…å®¹ |
| --- | --- |
| æ–‡æ¡£ç‰ˆæœ¬ | v0.2 |
| è¿­ä»£ç¼–å· | ITER-2025-01 |
| æŠ€æœ¯è´Ÿè´£äºº | å¾…æŒ‡æ´¾ |
| çŠ¶æ€ | ğŸŸ¡ å¼€å‘ä¸­ï¼ˆ85%å®Œæˆï¼‰ |
| æœ€åæ›´æ–°æ—¶é—´ | 2025-12-16ï¼ˆæ›´æ–°å®æ–½è¿›åº¦ï¼‰ |
| å…³è”éœ€æ±‚ | `docs/iterations/ITER-2025-01/REQUIREMENT.md` |
| å…³è”è®¾è®¡ | `docs/iterations/ITER-2025-01/DESIGN.md` |
| å…³è”æµ‹è¯• | `docs/iterations/ITER-2025-01/TESTING.md` |

## 1. é‡Œç¨‹ç¢‘ä¸äº¤ä»˜ï¼ˆå®é™…è¿›åº¦ï¼‰
| æ—¥æœŸ | é‡Œç¨‹ç¢‘ | è¯´æ˜ / äº¤ä»˜ç‰© | å®é™…çŠ¶æ€ |
| --- | --- | --- | --- |
| 12-01 | ç›®å½•éª¨æ¶å¯å®¡æ ¸ | README ä»£ç ç»“æ„ã€Pythoné…ç½®ã€src/traffic_rules æ¨¡å—ã€CLIéª¨æ¶ | âœ… å·²å®Œæˆ |
| 12-02 | éœ€æ±‚å†»ç»“ | README/éœ€æ±‚/è®¾è®¡/æµ‹è¯•æ–‡æ¡£åŒæ­¥ï¼›ç¡®è®¤ Python æŠ€æœ¯æ ˆ | âœ… å·²å®Œæˆ |
| 12-03 | MVP æ¨¡å—å®ç° | GraphBuilder/GAT+Memoryã€RuleEngine/Lossã€å¯è§£é‡Šæ€§ã€ä¼ªæ ‡ç­¾ã€CLI | âœ… ä¸»ä½“å®Œæˆ |
| 12-05 | æ•°æ®ä¸é…ç½®å°±ç»ª | `TrafficLightDataset`ã€åˆæˆæ•°æ®è„šæœ¬ã€Pythoné…ç½®ç³»ç»Ÿ | âœ… å·²å®Œæˆ |
| 12-10 | æ¨¡å‹ä¸æ³¨æ„åŠ›æ¨¡å—å®Œæˆ | GAT + è®°å¿†æ³¨æ„åŠ›ã€è§„åˆ™æŸå¤±ã€æŒ‡æ ‡åŸ‹ç‚¹ã€å¯è§£é‡Šè„šæœ¬ | âœ… å·²å®Œæˆ |
| 12-13 | æµ‹è¯•/éªŒæ”¶ | `pytest` + CLI æµ‹è¯• + æ³¨æ„åŠ›å¯è§†åŒ–è¾“å‡º | ğŸŸ¡ éƒ¨åˆ†å®Œæˆï¼ˆç¼ºä¸‰åœºæ™¯éªŒæ”¶ï¼‰ |
| 12-16 | æ–‡æ¡£ä¸ä»£ç å¯¹é½ | éœ€æ±‚çŠ¶æ€æ ‡è®°ã€è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€å®æ–½è®¡åˆ’ | ğŸŸ¢ è¿›è¡Œä¸­ |
| 12-17 | äº¤ä»˜è¯„å®¡ï¼ˆç›®æ ‡ï¼‰ | æäº¤æŠ¥å‘Šã€æŒ‡æ ‡ã€Artifactsã€æ–‡æ¡£æ›´æ–° | â³ å¾…å®Œæˆ |

## 2. æŠ€æœ¯ç¯å¢ƒ
- **è¯­è¨€/è¿è¡Œæ—¶**ï¼šPython 3.12ï¼ˆConda ç®¡ç†ï¼Œ`environment-dev.yml` ä¸ºå¼€å‘ç¯å¢ƒå®šä¹‰ï¼‰ã€‚
- **ä¾èµ–**ï¼š`torch>=2.4`, `torchvision>=0.19`, `numpy>=1.26`, `pydantic>=2.7`, `networkx>=3.2`, `prometheus-client>=0.20`, `rich>=13.7`ï¼ˆé€šè¿‡ conda-forge å®‰è£…ï¼‰ã€‚
- **ç¡¬ä»¶**ï¼šå¼€å‘ä½¿ç”¨ macOS + M3ï¼Œæœ¬åœ° CPUï¼›æµ‹è¯•/è®­ç»ƒåœ¨ Ubuntu 22.04 + NVIDIA RTX 4090ï¼ˆCUDA 12.1ï¼‰ã€‚
- **åŸºçº¿å‘½ä»¤**ï¼š
  ```bash
  conda env create -f environment-dev.yml
  conda activate traffic-rules-dev
  black --check --line-length 100 .
  ruff check src tests
  mypy src --strict
  pytest --maxfail=1 --cov=src --cov-report=xml
  ```

## 3. å·¥ä½œåˆ†è§£ç»“æ„ï¼ˆWBSï¼‰- å®é™…äº§å‡º
| æ¨¡å— | Owner | ä»»åŠ¡æ‹†åˆ† | å®é™…äº§å‡º | å®ŒæˆçŠ¶æ€ |
| --- | --- | --- | --- | --- |
| æ•°æ®æ‘„å– (WBS-01) | Data å·¥ç¨‹ | `TrafficLightDataset`ã€BDD100K/Cityscapes è§£æã€åˆæˆæ•°æ®è„šæœ¬ã€åœçº¿è·ç¦»è®¡ç®— | âœ… `src/traffic_rules/data/traffic_dataset.py`<br/>âœ… `scripts/prepare_synthetic_data.py`<br/>âœ… `src/traffic_rules/utils/geometry.py`<br/>âŒ BDD100K/Cityscapesè§£æå™¨ï¼ˆå¾…ITER-02ï¼‰ | ğŸŸ¡ 60% |
| è¯­ä¹‰å›¾å»ºæ¨¡ (WBS-02) | AI å·¥ç¨‹ | å®ä½“ç‰¹å¾ç¼–ç ã€é‚»æ¥çŸ©é˜µæ„å»ºã€è§„åˆ™ DSL schema | âœ… `src/traffic_rules/graph/builder.py` | âœ… 100% |
| æ³¨æ„åŠ›å¢å¼º (WBS-03) | AI å·¥ç¨‹ | å¤šå¤´ GATã€è®°å¿†æ³¨æ„åŠ›æ£€ç´¢ã€attention dump API | âœ… `src/traffic_rules/models/multi_stage_gat.py`<br/>âœ… `src/traffic_rules/models/local_gat.py`<br/>âœ… `src/traffic_rules/models/global_attention.py`<br/>âœ… `src/traffic_rules/models/rule_attention.py`<br/>âœ… `src/traffic_rules/explain/attention_viz.py` | âœ… 95% |
| è§„åˆ™/æŸå¤± (WBS-04) | AI å·¥ç¨‹ | çº¢ç¯è§„åˆ™ DSLã€çº¦æŸ Lossã€å‘½ä¸­æ—¥å¿— | âœ… `src/traffic_rules/rules/red_light.py`<br/>âœ… `src/traffic_rules/loss/constraint.py` | âœ… 100% |
| è®­ç»ƒä¸ CLI (WBS-05) | å¹³å° | `tools/train_red_light.py`ã€`tools/test_red_light.py`ã€é…ç½®ç®¡ç† | âœ… `tools/train_red_light.py`<br/>âœ… `tools/test_red_light.py`<br/>âœ… `src/traffic_rules/config/`ï¼ˆPythoné…ç½®ï¼‰ | âœ… 95% |
| ç›‘æ§ä¸æŒ‡æ ‡ (WBS-06) | å¹³å° | Prometheus æŒ‡æ ‡ã€è¿è§„ç»Ÿè®¡ã€æ—¥å¿—ç»“æ„åŒ– | âœ… `src/traffic_rules/monitoring/metrics.py`<br/>âœ… `src/traffic_rules/monitoring/gradient_monitor.py`<br/>âœ… `src/traffic_rules/monitoring/visualizer.py` | âœ… 100% |
| æ–‡æ¡£ & å¯è§£é‡Šæ€§ (WBS-07) | å…¨å‘˜ | README ç´¢å¼•ã€éœ€æ±‚/è®¾è®¡/æµ‹è¯•åŒæ­¥ã€æ³¨æ„åŠ›çƒ­åŠ›å›¾ã€æŠ¥å‘Šæ¨¡æ¿ | âœ… `docs/` æ–‡æ¡£æ›´æ–°å®Œæˆ<br/>ğŸŸ¡ `scripts/render_attention_maps.py`ï¼ˆå ä½ï¼‰ | ğŸŸ¡ 70% |
| è‡ªè®­ç»ƒä¸ä¼ªæ ‡ç­¾ (WBS-08) | AI å·¥ç¨‹ | ç½®ä¿¡åº¦é˜ˆå€¼ç­–ç•¥ã€ä¼ªæ ‡ç­¾å†™å…¥/å›æ”¾ã€æŒ‡æ ‡ä¸ŠæŠ¥ | âœ… `src/traffic_rules/self_training/pseudo_labeler.py`<br/>ğŸŸ¡ æœªé›†æˆåˆ°è®­ç»ƒå¾ªç¯ | ğŸŸ¡ 40% |

## 4. é£é™©ä¸ç¼“è§£
| é£é™© | å½±å“ | çº§åˆ« | ç¼“è§£ç­–ç•¥ |
| --- | --- | --- | --- |
| æ•°æ®è®¸å¯æˆ–ä½“ç§¯è¿‡å¤§ | æ— æ³•åœ¨æœ¬åœ°å¿«é€Ÿè¿­ä»£ | ä¸­ | MVP ä½¿ç”¨åˆæˆ + 100 æ¡ BDD100K å­é›†ï¼ŒçœŸå®æ•°æ®å»¶å |
| æ³¨æ„åŠ›ä¸è§„åˆ™ç»“æœä¸ä¸€è‡´ | å¯è§£é‡Šæ€§å—è´¨ç–‘ | é«˜ | åœ¨è®­ç»ƒä¸­å¼•å…¥ attention-consistency lossï¼Œå¹¶å°†æƒé‡ä¸è¿è§„ç»“æœå†™å…¥åŒä¸€æ—¥å¿— |
| èµ„æºå—é™ï¼ˆGPUï¼‰ | è®­ç»ƒæ—¶é—´ä¸å¯æ§ | ä¸­ | å…ˆç”¨ synthetic è¿›è¡Œ sanity checkï¼ŒCI ä»…è·‘å°æ‰¹æ¬¡ï¼›æäº¤å‰å†è·‘å®Œæ•´è®­ç»ƒ |
| è§„åˆ™ DSL æ‰©å±•æ€§ä¸è¶³ | åç»­å¤šè§„åˆ™è¿­ä»£å›°éš¾ | ä¸­ | é‡‡ç”¨ `pydantic` å®šä¹‰è§„åˆ™ schema + çƒ­æ›´æ–°æœºåˆ¶ï¼›åœ¨æœ¬è¿­ä»£å…ˆå®ç°çº¢ç¯è§„åˆ™ |

## 5. è´¨é‡ç­–ç•¥
- **å•å…ƒæµ‹è¯•**ï¼šè¦†ç›–æ•°æ®é›†è§£æã€å›¾æ„å»ºã€æ³¨æ„åŠ›æ¨¡å—ã€è§„åˆ™æŸå¤±ï¼ˆ`tests/unit`ï¼‰ã€‚
- **é›†æˆæµ‹è¯•**ï¼š`pytest tests/integration/traffic_rules`ï¼Œæ¨¡æ‹Ÿåœè½¦/é—¯çº¢ç¯/ç»¿ç¯é€šè¿‡çš„ CLI åœºæ™¯ã€‚
- **Selenium/å‰ç«¯**ï¼šMVP æ— å‰ç«¯ï¼Œä»…è®°å½•éœ€æ±‚ï¼Œåç»­å¦‚æœ‰ UI å†è¡¥ã€‚
- **é™æ€æ£€æŸ¥**ï¼š`black + isort + ruff + mypy + bandit + pip-audit`ï¼ŒCI é˜»æ–­ã€‚
- **å¯è§‚æµ‹æ€§**ï¼šPrometheus æŒ‡æ ‡ï¼ˆlossã€è¿è§„æ•°ã€attention ä¸€è‡´ç‡ï¼‰ã€ç»“æ„åŒ–æ—¥å¿—ï¼ˆtrace_idã€scene_idã€rule_nameï¼‰ã€‚

## 6. å‘å¸ƒå‰æ£€æŸ¥ï¼ˆå½“å‰çŠ¶æ€ï¼‰
- [x] READMEã€éœ€æ±‚ã€è®¾è®¡ã€æµ‹è¯•æ–‡æ¡£æ›´æ–°ï¼ˆ2025-12-16å·²å¯¹é½ï¼‰
- [ ] å…¨é‡ lint/type/test é€šè¿‡ï¼ˆå¾…æ‰§è¡Œï¼‰
- [x] `scripts/prepare_synthetic_data.py` å¯æ‰§è¡Œä¸”å·²ç”Ÿæˆæ•°æ®
- [ ] `scripts/render_attention_maps.py` å®Œå–„ï¼ˆå½“å‰ä¸ºå ä½ï¼‰
- [ ] artifactsï¼šéœ€è¦è¿è¡Œå®Œæ•´è®­ç»ƒç”Ÿæˆ checkpoint
- [ ] ä¸‰åœºæ™¯éªŒæ”¶æµ‹è¯•ï¼ˆparking/violation/green_passï¼‰
- [ ] å®Œæ•´éªŒæ”¶æŠ¥å‘Šï¼ˆå«è¿è§„æˆªå›¾ã€æ³¨æ„åŠ›çƒ­åŠ›å›¾ï¼‰

## 7. å˜æ›´è®°å½•
| æ—¥æœŸ | ç‰ˆæœ¬ | å†…å®¹ | è´£ä»»äºº |
| --- | --- | --- | --- |
| 2025-11-30 | v0.1 | æ–°å»º ITER-2025-01 å¼€å‘è®¡åˆ’ï¼Œæ˜ç¡®ä»»åŠ¡æ‹†åˆ†ä¸æ³¨æ„åŠ›å¢å¼ºäº¤ä»˜ç‰© | æŠ€æœ¯è´Ÿè´£äººï¼ˆAIï¼‰ |
| 2025-12-16 | v0.2 | æ›´æ–°é‡Œç¨‹ç¢‘å®é™…è¿›åº¦ã€WBSäº§å‡ºçŠ¶æ€ã€å‘å¸ƒå‰æ£€æŸ¥æ¸…å• | æŠ€æœ¯è´Ÿè´£äººï¼ˆAIï¼‰ |

